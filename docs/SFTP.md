# OxideTerm SFTP åŠŸèƒ½æ–‡æ¡£

> æœ¬æ–‡æ¡£æè¿° SFTP æ–‡ä»¶æµè§ˆå™¨çš„åŠŸèƒ½å’Œå®ç°ç»†èŠ‚ã€‚

## ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [ç•Œé¢è¯´æ˜](#ç•Œé¢è¯´æ˜)
3. [æ–‡ä»¶æ“ä½œ](#æ–‡ä»¶æ“ä½œ)
4. [æ–‡ä»¶é¢„è§ˆ](#æ–‡ä»¶é¢„è§ˆ)
5. [ä¼ è¾“ç®¡ç†](#ä¼ è¾“ç®¡ç†)
6. [API å‚è€ƒ](#api-å‚è€ƒ)

---

## åŠŸèƒ½æ¦‚è¿°

OxideTerm å†…ç½® SFTP æ–‡ä»¶æµè§ˆå™¨ï¼Œæä¾›ï¼š

- ğŸ“ **åŒçª—æ ¼è§†å›¾** - æœ¬åœ°å’Œè¿œç¨‹æ–‡ä»¶å¹¶æ’æ˜¾ç¤º
- ğŸ”„ **æ‹–æ‹½ä¼ è¾“** - ç›´æ¥æ‹–æ‹½ä¸Šä¼ /ä¸‹è½½
- ğŸ‘ï¸ **æ™ºèƒ½é¢„è§ˆ** - æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼é¢„è§ˆ
- ğŸ“Š **ä¼ è¾“é˜Ÿåˆ—** - æ‰¹é‡ä¼ è¾“ç®¡ç†å’Œè¿›åº¦æ˜¾ç¤º
- âŒ¨ï¸ **é”®ç›˜æ“ä½œ** - å…¨é”®ç›˜æ”¯æŒ

---

## ç•Œé¢è¯´æ˜

### åŒçª—æ ¼å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SFTP - user@server                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Local                      â”‚ Remote (server)                â”‚
â”‚ /Users/name/Documents      â”‚ /home/user                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ ..                      â”‚ ğŸ“ ..                          â”‚
â”‚ ğŸ“ projects/               â”‚ ğŸ“ .config/                    â”‚
â”‚ ğŸ“„ readme.md               â”‚ ğŸ“ data/                       â”‚
â”‚ ğŸ“„ config.json             â”‚ ğŸ“„ .bashrc                     â”‚
â”‚                            â”‚ ğŸ“„ app.py                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Transfer Queue: 0 active, 0 pending                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å·¥å…·æ 

| å›¾æ ‡ | åŠŸèƒ½ | å¿«æ·é”® |
|------|------|--------|
| ğŸ  | è¿”å›ä¸»ç›®å½• | `~` |
| â¬†ï¸ | ä¸Šçº§ç›®å½• | `Backspace` |
| ğŸ”„ | åˆ·æ–° | `F5` |
| ğŸ“+ | æ–°å»ºæ–‡ä»¶å¤¹ | `Ctrl+N` |
| ğŸ” | æœç´¢è¿‡æ»¤ | `/` |

### æ’åºé€‰é¡¹

ç‚¹å‡»åˆ—æ ‡é¢˜å¯åˆ‡æ¢æ’åºï¼š
- **åç§°** - å­—æ¯é¡ºåº
- **å¤§å°** - æ–‡ä»¶å¤§å°
- **ä¿®æ”¹æ—¶é—´** - æœ€åä¿®æ”¹æ—¥æœŸ

---

## æ–‡ä»¶æ“ä½œ

### åŸºæœ¬æ“ä½œ

| æ“ä½œ | æ–¹å¼ |
|------|------|
| æ‰“å¼€ç›®å½• | åŒå‡» / Enter |
| é€‰æ‹©å•ä¸ª | å•å‡» |
| å¤šé€‰ | Ctrl+Click |
| èŒƒå›´é€‰æ‹© | Shift+Click |
| å…¨é€‰ | Ctrl+A |
| é¢„è§ˆ | å³é”® â†’ é¢„è§ˆ |
| é‡å‘½å | å³é”® â†’ é‡å‘½å / F2 |
| åˆ é™¤ | å³é”® â†’ åˆ é™¤ / Delete |

### ä¼ è¾“æ“ä½œ

| æ–¹å¼ | è¯´æ˜ |
|------|------|
| æ‹–æ‹½ | é€‰ä¸­æ–‡ä»¶æ‹–æ‹½åˆ°å¯¹é¢çª—æ ¼ |
| å³é”® | é€‰ä¸­ â†’ å³é”® â†’ ä¸Šä¼ /ä¸‹è½½ |
| åŒå‡» | åŒå‡»è¿œç¨‹æ–‡ä»¶è‡ªåŠ¨ä¸‹è½½åˆ°å½“å‰æœ¬åœ°ç›®å½• |

### æ‰¹é‡æ“ä½œ

1. ä½¿ç”¨ Ctrl+Click æˆ– Shift+Click å¤šé€‰
2. å³é”®é€‰æ‹©æ“ä½œ (åˆ é™¤/ä¼ è¾“)
3. ç¡®è®¤å¯¹è¯æ¡†

---

## æ–‡ä»¶é¢„è§ˆ

### æ”¯æŒçš„æ ¼å¼

#### æ–‡æœ¬/ä»£ç æ–‡ä»¶

| æ‰©å±•å | è¯­è¨€é«˜äº® |
|--------|----------|
| `.sh`, `.bash`, `.zsh` | Bash |
| `.py`, `.pyw` | Python |
| `.js`, `.mjs`, `.cjs` | JavaScript |
| `.ts`, `.tsx` | TypeScript |
| `.rs` | Rust |
| `.go` | Go |
| `.c`, `.h`, `.cpp`, `.hpp` | C/C++ |
| `.java` | Java |
| `.json`, `.jsonc` | JSON |
| `.yaml`, `.yml` | YAML |
| `.toml` | TOML |
| `.xml`, `.html` | XML/HTML |
| `.md`, `.markdown` | Markdown |
| `.sql` | SQL |
| `.conf`, `.ini`, `.cfg` | INI |
| `.env`, `.envrc` | ç¯å¢ƒå˜é‡ |
| `.dockerfile` | Docker |
| `.makefile` | Makefile |
| ... | å…± 50+ ç§ |

**é™åˆ¶**: æ–‡æœ¬æ–‡ä»¶æœ€å¤§ 1MB

#### å›¾ç‰‡

| æ ¼å¼ | æ”¯æŒ |
|------|------|
| PNG, JPG, JPEG, GIF, WebP | âœ… |
| SVG | âœ… |
| BMP, ICO | âœ… |

**é™åˆ¶**: å›¾ç‰‡æœ€å¤§ 10MB

#### è§†é¢‘

| æ ¼å¼ | æ”¯æŒ |
|------|------|
| MP4 | âœ… (æœ€ä½³å…¼å®¹) |
| WebM | âœ… |
| OGG | âœ… |
| MOV | âš ï¸ éƒ¨åˆ†æµè§ˆå™¨ |
| MKV, AVI | âš ï¸ éœ€è½¬ç  |

**é™åˆ¶**: è§†é¢‘æœ€å¤§ 50MB

#### éŸ³é¢‘

| æ ¼å¼ | æ”¯æŒ |
|------|------|
| MP3, WAV, OGG | âœ… |
| FLAC, AAC, M4A | âœ… |

**é™åˆ¶**: éŸ³é¢‘æœ€å¤§ 50MB

#### PDF

| æ ¼å¼ | æ”¯æŒ |
|------|------|
| PDF | âœ… å†…åµŒæŸ¥çœ‹å™¨ |

**é™åˆ¶**: PDF æœ€å¤§ 10MB

#### Office æ–‡æ¡£ (å¯é€‰)

| æ ¼å¼ | æ”¯æŒ | è¦æ±‚ |
|------|------|------|
| DOCX, DOC | âœ… è½¬ PDF é¢„è§ˆ | éœ€å®‰è£… LibreOffice |
| XLSX, XLS | âœ… è½¬ PDF é¢„è§ˆ | éœ€å®‰è£… LibreOffice |
| PPTX, PPT | âœ… è½¬ PDF é¢„è§ˆ | éœ€å®‰è£… LibreOffice |
| ODT, ODS, ODP | âœ… è½¬ PDF é¢„è§ˆ | éœ€å®‰è£… LibreOffice |

**é™åˆ¶**: 
- æ–‡æ¡£æœ€å¤§ 10MB
- éœ€è¦ç³»ç»Ÿå®‰è£… LibreOffice
- æœªå®‰è£…æ—¶æ˜¾ç¤ºå‹å¥½æç¤º

#### äºŒè¿›åˆ¶æ–‡ä»¶ (Hex è§†å›¾)

å¯¹äºæ— æ³•è¯†åˆ«çš„æ–‡ä»¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºåå…­è¿›åˆ¶è§†å›¾ï¼š

```
Hex View â€¢ æ˜¾ç¤ºå‰ 16KB â€¢ å…± 1.2MB

00000000  7F 45 4C 46 02 01 01 00  00 00 00 00 00 00 00 00 |.ELF............|
00000010  03 00 3E 00 01 00 00 00  40 10 40 00 00 00 00 00 |..>.....@.@.....|
00000020  40 00 00 00 00 00 00 00  98 19 00 00 00 00 00 00 |@...............|
...

                    [åŠ è½½æ›´å¤š (+16KB)]
```

**ç‰¹æ€§**:
- é»˜è®¤åªåŠ è½½å‰ 16KB
- ç‚¹å‡»"åŠ è½½æ›´å¤š"æ¯æ¬¡åŠ è½½ 16KB
- æ˜¾ç¤º ASCII å¯æ‰“å°å­—ç¬¦

---

## ä¼ è¾“ç®¡ç†

### ä¼ è¾“é˜Ÿåˆ—

ä½äº SFTP è§†å›¾åº•éƒ¨ï¼Œæ˜¾ç¤ºï¼š

- **è¿›è¡Œä¸­** - å½“å‰æ­£åœ¨ä¼ è¾“çš„æ–‡ä»¶
- **ç­‰å¾…ä¸­** - é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ–‡ä»¶
- **å·²å®Œæˆ** - æœ€è¿‘å®Œæˆçš„ä¼ è¾“ (ä¿ç•™ 50 æ¡)
- **å¤±è´¥** - ä¼ è¾“å¤±è´¥çš„æ–‡ä»¶

### è¿›åº¦æ˜¾ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transfer Queue                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬†ï¸ Uploading: large-file.zip                                â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  67% â”‚ 45.2 MB/s â”‚ ETA: 12s â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Pending: 3 files (128 MB total)                             â”‚
â”‚ â³ file1.txt, file2.pdf, archive.tar.gz                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼ è¾“æ§åˆ¶

| æ“ä½œ | è¯´æ˜ |
|------|------|
| â¸ï¸ æš‚åœ | æš‚åœå½“å‰ä¼ è¾“ |
| â–¶ï¸ ç»§ç»­ | æ¢å¤æš‚åœçš„ä¼ è¾“ |
| âŒ å–æ¶ˆ | å–æ¶ˆä¼ è¾“å¹¶åˆ é™¤ä¸å®Œæ•´æ–‡ä»¶ |
| ğŸ”„ é‡è¯• | é‡è¯•å¤±è´¥çš„ä¼ è¾“ |

### å¹¶å‘ä¼ è¾“

é»˜è®¤æœ€å¤š 3 ä¸ªå¹¶å‘ä¼ è¾“ï¼Œå¯åœ¨è®¾ç½®ä¸­è°ƒæ•´ã€‚

---

## API å‚è€ƒ

### åˆå§‹åŒ– SFTP

```typescript
// ä¸ºä¼šè¯åˆå§‹åŒ– SFTP
const cwd = await api.sftpInit(sessionId);
// è¿”å›å½“å‰å·¥ä½œç›®å½•ï¼Œå¦‚ "/home/user"
```

### ç›®å½•æ“ä½œ

```typescript
// åˆ—å‡ºç›®å½•å†…å®¹
const files: FileInfo[] = await api.sftpListDir(sessionId, "/path/to/dir");

// è·å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯
const info: FileInfo = await api.sftpStat(sessionId, "/path/to/file");

// åˆ›å»ºç›®å½•
await api.sftpMkdir(sessionId, "/path/to/new/dir");

// åˆ é™¤æ–‡ä»¶
await api.sftpDelete(sessionId, "/path/to/file");

// é€’å½’åˆ é™¤ç›®å½•
const deletedCount = await api.sftpDeleteRecursive(sessionId, "/path/to/dir");

// é‡å‘½å/ç§»åŠ¨
await api.sftpRename(sessionId, "/old/path", "/new/path");
```

### æ–‡ä»¶ä¼ è¾“

```typescript
// ä¸‹è½½æ–‡ä»¶
await api.sftpDownload(sessionId, "/remote/path", "/local/path");

// ä¸Šä¼ æ–‡ä»¶
await api.sftpUpload(sessionId, "/local/path", "/remote/path");

// ä¸‹è½½ç›®å½•
const fileCount = await api.sftpDownloadDir(sessionId, "/remote/dir", "/local/dir");

// ä¸Šä¼ ç›®å½•
const fileCount = await api.sftpUploadDir(sessionId, "/local/dir", "/remote/dir");
```

### æ–‡ä»¶é¢„è§ˆ

```typescript
// é¢„è§ˆæ–‡ä»¶å†…å®¹
const content: PreviewContent = await api.sftpPreview(sessionId, "/path/to/file");

// å¢é‡åŠ è½½ Hex æ•°æ®
const hexContent: PreviewContent = await api.sftpPreviewHex(sessionId, "/path/to/file", offset);
```

### PreviewContent ç±»å‹

```typescript
type PreviewContent =
  | { Text: { data: string; mime_type: string | null; language: string | null } }
  | { Image: { data: string; mime_type: string } }
  | { Video: { data: string; mime_type: string } }
  | { Audio: { data: string; mime_type: string } }
  | { Pdf: { data: string; original_mime: string | null } }
  | { Hex: { data: string; total_size: number; offset: number; chunk_size: number; has_more: boolean } }
  | { TooLarge: { size: number; max_size: number; recommend_download: boolean } }
  | { Unsupported: { mime_type: string; reason: string } };
```

### ä¼ è¾“è¿›åº¦äº‹ä»¶

```typescript
import { listen } from '@tauri-apps/api/event';

// ç›‘å¬ä¼ è¾“è¿›åº¦
const unlisten = await listen(`sftp:progress:${sessionId}`, (event) => {
  const progress: TransferProgress = event.payload;
  console.log(`${progress.id}: ${progress.transferred_bytes}/${progress.total_bytes}`);
});

// æ¸…ç†ç›‘å¬å™¨
unlisten();
```

### TransferProgress ç±»å‹

```typescript
interface TransferProgress {
  id: string;
  remote_path: string;
  local_path: string;
  direction: 'download' | 'upload';
  state: 'pending' | 'in_progress' | 'completed' | 'failed' | 'cancelled';
  total_bytes: number;
  transferred_bytes: number;
  speed: number;  // bytes/second
  eta_seconds: number | null;
  error: string | null;
}
```

---

## å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Enter` | æ‰“å¼€ç›®å½• / é¢„è§ˆæ–‡ä»¶ |
| `Backspace` | ä¸Šçº§ç›®å½• |
| `~` | è¿”å›ä¸»ç›®å½• |
| `F2` | é‡å‘½å |
| `F5` | åˆ·æ–° |
| `Delete` | åˆ é™¤ |
| `Ctrl+A` | å…¨é€‰ |
| `Ctrl+N` | æ–°å»ºæ–‡ä»¶å¤¹ |
| `/` | æœç´¢è¿‡æ»¤ |
| `Tab` | åˆ‡æ¢çª—æ ¼ç„¦ç‚¹ |
| `â†‘â†“` | å¯¼èˆª |

---

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸäº›æ–‡ä»¶æ˜¾ç¤ºä¸º"ä¸æ”¯æŒé¢„è§ˆ"ï¼Ÿ

**A:** å¯èƒ½çš„åŸå› ï¼š
1. æ–‡ä»¶ç±»å‹æœªè¢«è¯†åˆ« - å°è¯•ä½¿ç”¨æ­£ç¡®çš„æ‰©å±•å
2. æ–‡ä»¶è¿‡å¤§ - è¶…è¿‡äº†é¢„è§ˆé™åˆ¶
3. äºŒè¿›åˆ¶æ–‡ä»¶ - ä¼šè‡ªåŠ¨ä½¿ç”¨ Hex è§†å›¾

### Q: ä¼ è¾“é€Ÿåº¦å¾ˆæ…¢ï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥è´¨é‡
2. æœåŠ¡å™¨è´Ÿè½½
3. å°è¯•å‡å°‘å¹¶å‘ä¼ è¾“æ•°

### Q: Office æ–‡æ¡£æ— æ³•é¢„è§ˆï¼Ÿ

**A:** éœ€è¦å®‰è£… LibreOffice:
- macOS: `brew install --cask libreoffice`
- Ubuntu: `sudo apt install libreoffice`
- Windows: ä»å®˜ç½‘ä¸‹è½½å®‰è£…

### Q: å¦‚ä½•é¢„è§ˆè¶…è¿‡é™åˆ¶çš„å¤§æ–‡ä»¶ï¼Ÿ

**A:** ä¸‹è½½åˆ°æœ¬åœ°åä½¿ç”¨æœ¬åœ°åº”ç”¨æ‰“å¼€ã€‚
